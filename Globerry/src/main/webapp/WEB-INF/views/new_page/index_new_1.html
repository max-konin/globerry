<HTML>
<HEAD>
<meta charset="utf-8">
<TITLE>Globerry (v1.0b)</TITLE>

<link rel="stylesheet" href="resources/styles/globerry.css" type="text/css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<!--In the header of your page, paste the following for Kendo UI Web styles-->
<link href="resources/javascripts/kendoui/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
<link href="resources/javascripts/kendoui/styles/globerry.min.css" rel="stylesheet" type="text/css" />
<!--Then paste the following for Kendo UI Web scripts-->
<script src="resources/javascripts/kendoui/js/kendo.web.min.js" type="text/javascript"></script>
<script type="text/javascript" src="resources/javascripts/jquery.ui-slider.js"></script>
<script type="text/javascript">
$(document).ready(function(){
/*******************************************************************************/
//вывод строки в заголовке
$(".changeHeaderByClick").click(function() {
//function headerChange(serverName)
//	{
		//var JSONContr = new JsonController(serverName); 
		//string constants.
		//alert('change header');
		WhoStr = new Array();
		WhoStr['Я один'] = "Я один еду ";
		WhoStr['С друзьями'] = "Мы с друзьями едем ";
		WhoStr['Семьей'] = "Мы с семьей едем ";
		WhoStr['Вдвоем'] = "Мы вдвоем едем ";

		WhatStr = new Array();
		WhatStr['Загорать'] = "загорать ";
		WhatStr['Кататься'] = "кататься ";
		WhatStr['Смотреть'] = "смотреть достопримечательности ";
		WhatStr['Шопинг'] = "за покупками ";
		WhatStr['В круиз'] = "в круиз ";

		WhenStr = new Array();
		WhenStr['Январь'] = "в январе!";
		WhenStr['Февраль'] = "в феврале!";
		WhenStr['Март'] = "в марте!";
		WhenStr['Апрель'] = "в апреле!";
		WhenStr['Май'] = "в мае!";
		WhenStr['Июнь'] = "в июне!";
		WhenStr['Июль'] = "в июле!";
		WhenStr['Август'] = "в августе!";
		WhenStr['Сентябрь'] = "в сентябре!";
		WhenStr['Октябрь'] = "в октябре!";
		WhenStr['Ноябрь'] = "в ноябре!";
		WhenStr['Декабрь'] = "в декабре!";
		
		/*получаем значения select'а из комбобокса*/
		var who = $(".whoSelect option:selected").text();
		var what = $(".whatSelect option:selected").text();
		var when = $(".whenSelect option:selected").text();
		
		/*выбранный месяц сделать активным*/
		var activeMonthId = $(".whenSelect option:selected").val();
		if ($('.activeMonth').text().length > 0)//месяц в календаре не выбран
		{
			when = $('.activeMonth').text();
		}
		
		var resultHeader = WhoStr[who] + WhatStr[what] + WhenStr[when];
		$('#hText').val(resultHeader);
		/*выбранный месяц вписывать в заголовок*/
		$('.activeMonth').val(when);
	//}
})
/*******************************************************************************/
//выбор месяца
	$(".month").click(function() {
		$('.month').removeClass('activeMonth');
		$('#'+this.id).addClass('activeMonth'); 
		//id месяца в календаре
		alert('id='+this.id+'  activeMonth='+$('.activeMonth').text());
		
	});
	$("#whenDropDownList").change(function() {
		//03.когда
		$(".whenSelect option:selected").val()
		alert('Month val = '+$(".whenSelect option:selected").val());
	});

/*******************************************************************************/
//всплывающая панель внизу
// switch the bottom on and off, and changes the state of the buttom.
var prevBotBut; //bottom buttoms
var bottomActive = false;
	$(".bottomButton").click(function(){
		//animation for switching bottoms.
		if( bottomActive == false){
			if(prevBotBut != undefined){
				prevBotBut.style.background = 'rgb(37, 46, 64)';
			}
			prevBotBut = this;
			$("#bottom").animate({
				bottom:147
			},"slow");
			$("#whiteBottom").animate({
				height:147
			},"slow", function () {
				$(("#" +prevBotBut.id + "B")).show();
			});			
			this.style.background = 'rgb(255, 122, 2)';
			$(this).animate({
				width:124
			}, 0);
			bottomActive = true;
			prevBotBut = this;
		} else
		if(bottomActive == true){
			if(prevBotBut == this){
				$("#bottom").animate({
					bottom:0
				},"slow");
				$(("#" +prevBotBut.id + "B")).hide();
				$("#WhiteBottom").animate({
					height:0
				},"slow");
				this.style.background = 'rgb(37, 46, 64)';
				$(this).animate({
					width:120
				}, 0);
				bottomActive = false;
			} else
			{
				this.style.background = 'rgb(255, 122, 2)';
				$(("#" +prevBotBut.id + "B")).hide();
				$(this).animate({
					width:124
				}, 0);
				prevBotBut.style.background = 'rgb(37, 46, 64)';
				$(prevBotBut).animate({
					width:120
				}, 0);
				prevBotBut = this;
				$(("#" +prevBotBut.id + "B")).show();
			}
		}
	});

/*******************************************************************************/
//создаем комбобоксы
$(".whoSelect").kendoComboBox({});
$(".whatSelect").kendoComboBox();
$(".whenSelect").kendoComboBox({
		height: 1000
	});	
/*******************************************************************************/
//обработка чекбоксов виза и язык
$(".check").click(function() {
		if ($('#'+this.id).hasClass('checkOn'))
		{
			check_box_id = $('#'+this.id);
			$('#'+this.id).removeClass('checkOn');
			$('#'+this.id+'>'+'input').val(0);
		}
		else
		{
			$('#'+this.id).addClass('checkOn');
			$('#'+this.id+'>'+'input').val(1);
		}
	});
	

/*******************************************************************************/
//все combobox'ы readonly
	$('.whoWhatWhenDropDownList .k-input').attr('readonly','readonly');


/*******************************************************************************/
/*обработка кнопки "Поехали"*/
	$(".headerButton").click(function (event) {
		SelectActive = false;
		$("#headContent1").animate({
			height:0
		},"slow", function() {
			$("#headContent1").hide();
			$("#headContent2").show();
			$("#headText").show();
			$("#bottomToggle").slideToggle("slow");
			$("#bottom").show();
			$("#headerButtonUp").show();
			$("#UpperHeaderBlockWithCircle").show();
			$("#UpperHeaderBlockWithCircle").animate({
				opacity:1
			}, "slow");
			$("#headerButtonUp").animate({
				opacity:1
			}, "slow");
			$("#headContent2").animate({
				height:100
			}, "slow", function (){
				$("#calendar").show();
				$("#calendar").animate({
					height:26
				}, "slow", function(){				
					//here I wanted to fix bug with ctrange appearance of the calendar.
					});
			});
		});
	});	
	// as previous function this hides the second header and shows the first, with aimation.
	$(".headerUpSwitcher").click(function (event) {
		//animation.
		$("#headText").hide();
		$("#calendar").animate({
			height:0
		}, "normal", function (){
			$("#calendar").hide();
			$("#headerButtonUp").animate({
				opacity:0
			}, "slow");
			$("#UpperHeaderBlockWithCircle").animate({
				opacity:0
			}, "slow");
			$("#headContent2").animate({
				height:0
			},"slow", function() {
				$("#headerButtonUp").hide();
				$("#UpperHeaderBlockWithCircle").hide();
				$("#headContent2").hide();
				$("#headContent1").show();
				$("#headContent1").animate({
					height:38
				}, "slow");
			});
		});
	});
	

/*******************************************************************************/
//слайдеры
	$(".slider-range").each(function(){
			var minVal = parseInt($(this).parent().find('input:first').val()); 
			var maxVal = parseInt($(this).parent().find('input:last').val());  
			var params = {
				range: true,
				min: minVal,
				max: maxVal,
				values: [ minVal, maxVal ],
				step : 1,
/*				stop : sliderStopCallback,*/
				slide : function(event, ui) {
					$(this).parent().find('input:first').val(ui.values[0]);
					$(this).parent().find('input:last').val(ui.values[1]);
				}
			};
			$(this).slider(params);
		});
});


</script>
<style type="text/css">
</style>
</HEAD>
<BODY>
<div id = 'top'>
	<div id = 'invisibleHeadBlock'></div>
	<div id='head'>
		<div id='header'>
			<div id='headTop'>
				<div id="globerryTitle">GLOBERRY</div>
				<div id='headText'><input type="text" id="hText" value="" readonly=""></div>
			</div>
			<div id='headContent1' class ='headSwitcharable changeHeaderByClick'>
				<div id ='whoText' class = 'requestText'><span id="menuNumber">01.</span>Кто едет?</div>
				<div id='whoDropDownList' class='whoWhatWhenDropDownList'>
					<select id='' class='whoSelect'  style="width:112px" >
						<option value='1' id='aloneSelected' class ='selected' selected>Я один</option>
						<option value='2' id='withFriendsSelected' class ='selected'>С друзьями</option>
						<option value='3' id='withFamilySelected' class ='selected'>Семьей</option>
						<option value='4' id='coupleSelected' class ='selected'>Вдвоем</option>
					</select>
				</div>
				<div id ='whatText' class = 'requestText'><span id="menuNumber">02.</span>Что делать?</div>
				<div id='whatDropDownList' class='whoWhatWhenDropDownList' >
					<select id='' class='whatSelect' style="width:100px">
						<option value='1' id='tanSelected' selected>Загорать</option>
						<option value='2' id='skiSelected'>Кататься</option>
						<option value='3' id='watchSelected'>Смотреть</option>
						<option value='4' id='shoppingSelected'>Шопинг</option>
						<option value='5' id='cruiseSelected' >В круиз</option>
					</select>
				</div>
				<div id ='whenText' class = 'requestText'><span id="menuNumber">03.</span>Когда?</div>
				<div id='whenDropDownList' class='whoWhatWhenDropDownList'>
					<select id='' class='whenSelect' style="width:100px">
						<option value='1' id='jan' class = 'selected'>Январь</option>
						<option value='2' id='feb' class = 'selected'>Февраль</option>
						<option value='3' id='mar' class = 'selected'>Март</option>
						<option value='4' id='apr' class = 'selected'>Апрель</option>
						<option value='5' id='may' class = 'selected'>Май</option>
						<option value='6' id='jun' class = 'selected'>Июнь</option>
						<option value='7' id='jul' class = 'selected'>Июль</option>
						<option value='8' id='aug' class = 'selected'>Август</option>
						<option value='9' id='sep' class = 'selected'>Сентябрь</option>
						<option value='10' id='oct' class = 'selected'>Октябрь</option>
						<option value='11' id='nov' class = 'selected'>Ноябрь</option>
						<option value='12' id='dec' class = 'selected'>Декабрь</option>
					</select>
				</div>
				<div id ='headerButton'>
						<div id ='headerButtonText' class = 'headerButton'>Поехали</div>
						<div id ='headerButtonTBackGround' class = 'headerButton'></div>
				</div>
			</div>
			<div id='headContent2' class ='headSwitcharable'>
			<div id="firstBlock" class="secondHeaderBlocks">
				<div id='temperatureBlock' class='sliderBlocks' style='width:150px;'>
						<div class="formCost">
							<div class="bucks">
								<input type="text" id="minCost" class="left" value="-35" readonly />
							</div>
							<div id='temperatureText' class='blocksText' >Температура</div>
							<div class="bucks rightBucks">
								<input type="text" id="maxCost" class="right" value="35" readonly />
							</div>
						</div>
						<div id='temperatureSlider' class='slider-range'></div>
				</div>
				<div id='alcBlock' class='sliderBlocks bottomLineInBlocks' style='width:200px;'>
					<div class="formCost">
						<div class="bucks">$
							<input type="text" id="alcMinCost" class ='left bucksInputPosition' value="0" readonly />
						</div>
						<div id='alcText' class='blocksText'>Алкоголь</div>
						<div class="bucks rightBucks">$
							<input type="text" id="alcMaxCost" class ='right bucksInputPosition' value="30" readonly />
						</div>
					</div>
					<div id='alcSlider' class='slider-range'></div>
				</div>
			</div>
			<div id="secondBlock" class="secondHeaderBlocks">
				<div id='timeInPathBlock' class='sliderBlocks' style='width:150px;'>
					<div class="formCost">
						<div class="bucks">
							<input type="text" id="timeMinV" class ='left' value="0" readonly />
							Ч
						</div>
						<div id='timeInPathText' class='blocksText' >Время в пути</div>
						<div class="bucks rightBucks">
							<input type="text" id="timeMaxV" class ='right' value="24" readonly />
							Ч
						</div>
					</div>
					<div id='timeSlider' class='slider-range'></div>
				</div>
				<div id='moodBlock' class='sliderBlocks bottomLineInBlocks' style='width:150px;'>
					<div class="formCost">
						<div class="bucks">$
							<input type="text" id="moodMin" class ='left' value="0" readonly />
						</div>
						<div id='moodText' class='blocksText' >Настроение</div>
						<div class="bucks rightBucks">$
							<input type="text" id="moodMax" class ='right' value="100" readonly />
						</div>
					</div>
					<div id='moodSlider' class='slider-range'></div>
				</div>
			</div>
			<div id="thirdBlock" class="secondHeaderBlocks">
				<div id='liveCostBlock' class='sliderBlocks' style='width:150px;'>
					<div class="formCost">
						<div class="bucks">$
							<input type="text" id="livMinV" class ='left bucksInputPosition' value="0" readonly />
						</div>
						<div id='liveText' class='blocksText ' >Проживание</div>
						<div class="bucks rightBucks">$
							<input type="text" id="LivMaxV" class ='right bucksInputPosition' value="300" readonly />
						</div>
					</div>
					<div id='livecostSlider' class='slider-range'></div>
				</div>
					<div id='securityBlock' class='sliderBlocks bottomLineInBlocks' style='width:150px;'>
					<div class="formCost">
						<div class="bucks">$
							<input type="text" id="securityMin" class ='left bucksInputPosition' value="0" readonly />
						</div>
						<div id='securityText' class='blocksText' >Безопасность</div>
						<div class="bucks rightBucks">$
							<input type="text" id="securityMax" class ='right bucksInputPosition' value="100" readonly />
						</div>
					</div>
					<div id='securitySlider' class='slider-range'></div>
				</div>
			</div>
			<div id="forthBlock" class="secondHeaderBlocks">
				<div id='foodBlock' class='sliderBlocks' style='width:150px;'>
					<div class="formCost">
						<div class="bucks">$
							<input type="text" id="foodMinV" class ='left bucksInputPosition' value="0" readonly />
						</div>
						<div id='foodText' class='blocksText' >Еда</div>
						<div class="bucks rightBucks">$
							<input type="text" id="foodMaxV" class ='right bucksInputPosition' value="100" readonly />
						</div>
					</div>
					<div id='foodSlider' class='slider-range'></div>
				</div>
				<div id='sexBlock' class='sliderBlocks bottomLineInBlocks' style='width:150px;'>
					<div class="formCost">
						<div class="bucks">$
							<input type="text" id="sexMin" class ='left bucksInputPosition' value="0" readonly />
						</div>
						<div id='sexText' class='blocksText' >Секс</div>
						<div class="bucks rightBucks">$
							<input type="text" id="sexMax" class ='right bucksInputPosition' value="100" readonly />
						</div>
					</div>
					<div id='sexSlider' class='slider-range'></div>
				</div>
			</div>
			<!--
			Чекбоксы для Виза и Язык.
			input'ы скрыты, вместо них div'ы
			value в input задаются в JS 0 и 1 для unchecked и checked соответственно
			-->
			<div id="fifthBlock" class="secondHeaderBlocks">
				<div id="visaText" class="blocksText">Виза
					<div id="visaButtonActive">
						<div class="check" id="visaCheckbox">
							<input name="visaCheck" id="visaCheckInput" value="0" type="checkbox" />
						</div>
					</div>
				</div>
				<br />
				<div id="languageText" class="blocksText">Язык
					<div id="langButtonActive">
						<div class="check" id="langCheckbox">
							<input name="langCheck" id="langCheckInput" value="0" type="checkbox" />
						</div>
					</div>
				</div>
				
			</div>
			</div>
			<div id='headBottom'>
				<div id = 'headerButtonUp' class='headerUpSwitcher'></div>
			</div>
			<div id="calendar" style="display: none; height: 26px; ">
				<div id="calendarIMG"></div>
				<div id='allMonths' class='months changeHeaderByClick'>
					<div id="jan" class="upperClickableCaendarBG month jan">Январь</div>
					<div id="feb" class="upperClickableCaendarBG month feb">Февраль</div>
					<div id="mar" class="upperClickableCaendarBG month mar">Март</div>
					<div id="apr" class="upperClickableCaendarBG month apr">Апрель</div>
					<div id="may" class="upperClickableCaendarBG month may">Май</div>
					<div id="jun" class="upperClickableCaendarBG month jun">Июнь</div>
					<div id="jul" class="upperClickableCaendarBG month jul">Июль</div>
					<div id="aug" class="upperClickableCaendarBG month aug">Август</div>
					<div id="sep" class="upperClickableCaendarBG month sep">Сентябрь</div>
					<div id="oct" class="upperClickableCaendarBG month oct">Октябрь</div>
					<div id="nov" class="upperClickableCaendarBG month nov">Ноябрь</div>
					<div id="dec" class="upperClickableCaendarBG month dec">Декабрь</div>
				</div>
			</div>
	</div>
	</div>
</div>
<div id="bottomContainer">
	<div id="invisibleBottom"></div>
	<div id="bottom" class="roundBorder" style="display: block; ">
	<div id="bottomButtons">
		<div id="tour" class="bottomButton">
			<div class="bottomHeadText">Туры</div>
		</div>
		<div id="avia" class="bottomButton">
			<div class="bottomHeadText">Авиабилеты</div>
		</div>
		<div id="hotel" class="bottomButton">
			<div class="bottomHeadText">Отели</div>
		</div>
		<div id="auto" class="bottomButton">
			<div class="bottomHeadText">Авто</div>
		</div>
	</div>
	<div id="gradLine"></div>
	<div id="whiteBottom">
		<div id="tourB" class="bottomB">Туры</div>
		<div id="aviaB" class="bottomB">Авиа</div>
		<div id="hotelB" class="bottomB">Отели</div>
		<div id="autoB" class="bottomB">Авто</div>
	</div>	
	</div>
</div>
<div id='map'></div>
</BODY>
</HTML>